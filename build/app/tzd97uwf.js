/*! Built with http://stenciljs.com */
App.loadComponents("tzd97uwf",function(o,t,n,e,i){var r=function(){function o(){}return o.getAll=function(){var o=localStorage.getItem("books"),t=[];return o&&(t=JSON.parse(o)),t},o.add=function(t){var n=this.getAll();t.id||(t.id=o.uid()),n.push(t),this.__save(n)},o.__save=function(o){return localStorage.setItem("books",JSON.stringify(o))},o.uid=function(){var o=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(o+16*Math.random())%16|0;return o=Math.floor(o/16),("x"==t?n:7&n|8).toString(16)})},o.API_SEARCH="https://www.bookmatch.nl/api/data/book",o}(),a=function(){function o(){}return o.prototype.componentWillLoad=function(){var o=this;this.isbn=this.match.params.isbn,fetch(r.API_SEARCH+"?isbn="+this.isbn).then(function(o){return o.json()}).then(function(t){console.log(t),o.book={isbn:t.bookinfo.isbn,title:t.bookinfo.title,author:t.bookinfo.author,image:t.bookinfo.image}})},o.prototype.save=function(){this.book.id=r.uid(),r.add(this.book),this.history.push("/",{})},o.prototype.render=function(){var o=this;if(this.book)return t("ion-page",{c:{"show-page":!0}},t("ion-content",0,t("ion-card",0,t("ion-item",0,t("ion-avatar",{a:{"item-left":!0}},t("img",{p:{src:this.book.image}})),t("h2",0,this.book.title),t("p",0,this.book.author)))),t("ion-footer",0,t("ion-buttons",{a:{slot:"end"}},t("ion-button",{o:{click:function(){return o.save()}},a:{color:"primary"},p:{clear:!0}},n("Save")))))},o}(),c=function(){function o(){}return o.prototype.componentWillLoad=function(){console.log("page-home loaded"),this.books=r.getAll(),console.log(this.books)},o.prototype.scan=function(){this.history.push("/scan",{})},o.prototype.render=function(){var o=this,e=this.books.map(function(o){return t("ion-item",0,t("ion-avatar",{a:{"item-left":!0}},t("img",{p:{src:o.image}})),t("h2",0,o.title),t("p",0,o.author))});return t("ion-page",{c:{"show-page":!0}},t("ion-content",0,t("ion-list",0,e)),t("ion-footer",0,t("ion-buttons",{a:{slot:"end"}},t("ion-button",{o:{click:function(){return o.scan()}},a:{color:"primary"},p:{clear:!0}},n("Add")))))},o}(),s=function(){function o(){}return o.prototype.componentWillLoad=function(){console.log("page-scan loaded")},o.prototype.scanCompletedHandler=function(o){var t=this;fetch(r.API_SEARCH+"?isbn="+o.detail.value).then(function(o){return o.json()}).then(function(o){var n={isbn:o.bookinfo.isbn,title:o.bookinfo.title,author:o.bookinfo.author,image:o.bookinfo.image};t.alertCtrl.create({title:n.title,message:"Add this book?",buttons:[{text:"No",role:"cancel",handler:function(){console.log("cancel clicked")}},{text:"Yes",handler:function(){console.log("yes clicked"),r.add(n),t.history.replace("/",{})}}]}).then(function(o){o.present()})})},o.prototype.render=function(){return t("ion-page",{c:{"show-page":!0}},t("ion-content",0,t("ean-scanner",0)))},o}(),l=function(){function o(){}return o.prototype.render=function(){return t("ion-app",0,t("stencil-router",{a:{id:"router"}},t("stencil-route",{a:{url:"/",component:"page-home"},p:{exact:!0}}),t("stencil-route",{a:{url:"/scan",component:"page-scan"}}),t("stencil-route",{a:{url:"/add/:isbn",component:"page-add"}})))},o}();o["PAGE-ADD"]=a,o["PAGE-HOME"]=c,o["PAGE-SCAN"]=s,o["UBLIO-APP"]=l},["PAGE-ADD",[["book",5],["history",1],["isbn",5],["match",1]],{}],["PAGE-HOME",[["books",5],["history",1]],{}],["PAGE-SCAN",[["alertCtrl",4,0,"ion-alert-controller"],["history",1],["loadingCtrl",4,0,"ion-loading-controller"]],{}],["UBLIO-APP",0,{}]);